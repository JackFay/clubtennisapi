{"version":3,"sources":["../../src/api/index.js"],"names":["config","db","api","use","get","req","res","json","version","getEventsQuery","query","err","rows","fields","console","log","send","post","body","events","postEventsQuery","result"],"mappings":";;;;;;AAAA;;AACA;;AACA;;;;;;kBAEe,gBAAoB;AAAA,QAAjBA,MAAiB,QAAjBA,MAAiB;AAAA,QAATC,EAAS,QAATA,EAAS;;AAClC,QAAIC,MAAM,sBAAV;;AAEA;AACAA,QAAIC,GAAJ,CAAQ,SAAR,EAAmB,sBAAO,EAAEH,cAAF,EAAUC,MAAV,EAAP,CAAnB;;AAEA;AACAC,QAAIE,GAAJ,CAAQ,GAAR,EAAa,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC1BA,YAAIC,IAAJ,CAAS,EAAEC,yBAAF,EAAT;AACA,KAFD;;AAIGN,QAAIE,GAAJ,CAAQ,SAAR,EAAmB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC7B,YAAMG,iBAAiB,sBAAvB;;AAEAR,WAAGS,KAAH,CAASD,cAAT,EAAyB,UAACE,GAAD,EAAMC,IAAN,EAAYC,MAAZ,EAAuB;AAC5C,gBAAGF,GAAH,EAAO;AACHG,wBAAQC,GAAR,CAAYJ,GAAZ;AACAL,oBAAIU,IAAJ,CAASL,GAAT;AACH,aAHD,MAGK;AACDL,oBAAIU,IAAJ,CAASJ,IAAT;AACH;AACJ,SAPD;AAQH,KAXD;;AAaAV,QAAIe,IAAJ,CAAS,SAAT,EAAoB,UAACZ,GAAD,EAAMC,GAAN,EAAc;AAC9BQ,gBAAQC,GAAR,CAAYV,IAAIa,IAAhB;AACA,YAAMC,SAASd,IAAIa,IAAnB;AACA,YAAME,kBAAkB,0BAAxB;;AAEAnB,WAAGS,KAAH,CAASU,eAAT,EAA0Bf,IAAIa,IAA9B,EAAoC,UAACP,GAAD,EAAMU,MAAN,EAAiB;AACjD,gBAAGV,GAAH,EAAO;AACHG,wBAAQC,GAAR,CAAYJ,GAAZ;AACAL,oBAAIU,IAAJ,CAASL,GAAT;AACH,aAHD,MAGK;AACDG,wBAAQC,GAAR,CAAYM,MAAZ;AACAf,oBAAIU,IAAJ,CAAS,6BAAT;AACH;AACJ,SARD;AASH,KAdD;;AAgBH,WAAOd,GAAP;AACA,C","file":"index.js","sourcesContent":["import { version } from '../../package.json';\r\nimport { Router } from 'express';\r\nimport facets from './facets';\r\n\r\nexport default ({ config, db }) => {\r\n\tlet api = Router();\r\n\r\n\t// mount the facets resource\r\n\tapi.use('/facets', facets({ config, db }));\r\n\r\n\t// perhaps expose some API metadata at the root\r\n\tapi.get('/', (req, res) => {\r\n\t\tres.json({ version });\r\n\t});\r\n    \r\n    api.get('/events', (req, res) => {\r\n        const getEventsQuery = \"SELECT * FROM events\";\r\n        \r\n        db.query(getEventsQuery, (err, rows, fields) => {\r\n            if(err){\r\n                console.log(err);\r\n                res.send(err);\r\n            }else{\r\n                res.send(rows);\r\n            }\r\n        })\r\n    });\r\n    \r\n    api.post('/events', (req, res) => {\r\n        console.log(req.body)\r\n        const events = req.body\r\n        const postEventsQuery = \"INSERT INTO events SET ?\";\r\n        \r\n        db.query(postEventsQuery, req.body, (err, result) => {\r\n            if(err){\r\n                console.log(err);\r\n                res.send(err);\r\n            }else{\r\n                console.log(result);\r\n                res.send(\"successfully added event(s)\");\r\n            }\r\n        });\r\n    });\r\n\r\n\treturn api;\r\n}\r\n"]}